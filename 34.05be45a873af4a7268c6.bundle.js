(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1526:function(e,t,a){var n=a(234),r=a(1527);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1},o=(n(r,s),r.locals?r.locals:{});e.exports=o},1527:function(e,t,a){(t=a(235)(!1)).push([e.i,"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n.superset-legacy-chart-paired_ttest .scrollbar-container {\n  overflow: auto;\n}\n\n.paired-ttest-table .scrollbar-content {\n  padding-left: 5px;\n  padding-right: 5px;\n  margin-bottom: 0;\n}\n\n.paired-ttest-table table {\n  margin-bottom: 0;\n}\n\n.paired-ttest-table h1 {\n  margin-left: 5px;\n}\n\n.reactable-data tr,\n.reactable-header-sortable {\n  transition: ease-in-out 0.1s;\n}\n\n.reactable-data tr:hover {\n  background-color: #e0e0e0;\n}\n\n.reactable-data tr .false {\n  color: #f44336;\n}\n\n.reactable-data tr .true {\n  color: #4caf50;\n}\n\n.reactable-data tr .control {\n  color: #2196f3;\n}\n\n.reactable-data tr .invalid {\n  color: #ff9800;\n}\n\n.reactable-data .control td {\n  background-color: #eeeeee;\n}\n\n.reactable-header-sortable:hover,\n.reactable-header-sortable:focus,\n.reactable-header-sort-asc,\n.reactable-header-sort-desc {\n  background-color: #e0e0e0;\n  position: relative;\n}\n\n.reactable-header-sort-asc:after {\n  content: '\\25bc';\n  position: absolute;\n  right: 10px;\n}\n\n.reactable-header-sort-desc:after {\n  content: '\\25b2';\n  position: absolute;\n  right: 10px;\n}\n",""]),e.exports=t},2214:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(1),o=a.n(s),l=a(1528),i=a.n(l),c=a(1535);const u=r.a.arrayOf(r.a.shape({group:r.a.arrayOf(r.a.string),values:r.a.arrayOf(r.a.shape({x:r.a.number,y:r.a.number}))})),p={alpha:r.a.number,data:u.isRequired,groups:r.a.arrayOf(r.a.string).isRequired,liftValPrec:r.a.number,metric:r.a.string.isRequired,pValPrec:r.a.number};class h extends o.a.Component{constructor(e){super(e),this.state={control:0,liftValues:[],pValues:[]}}componentDidMount(){const{control:e}=this.state;this.computeTTest(e)}getLiftStatus(e){const{control:t,liftValues:a}=this.state;if(e===t)return"control";const n=a[e];return Number.isNaN(n)||!Number.isFinite(n)?"invalid":n>=0?"true":"false"}getPValueStatus(e){const{control:t,pValues:a}=this.state;if(e===t)return"control";const n=a[e];return Number.isNaN(n)||!Number.isFinite(n)?"invalid":""}getSignificance(e){const{control:t,pValues:a}=this.state,{alpha:n}=this.props;return e===t?"control":a[e]<=n}computeLift(e,t){const{liftValPrec:a}=this.props;let n=0,r=0;return e.forEach((e,a)=>{n+=e.y,r+=t[a].y}),((n-r)/r*100).toFixed(a)}computePValue(e,t){const{pValPrec:a}=this.props;let n=0,r=0,s=0;e.forEach((e,a)=>{const o=t[a].y-e.y;isFinite(o)&&(s++,n+=o,r+=o*o)});const o=-Math.abs(n*Math.sqrt((s-1)/(s*r-n*n)));try{return(2*new i.a.Studentt(s-1).cdf(o)).toFixed(a)}catch(e){return NaN}}computeTTest(e){const{data:t}=this.props,a=[],n=[];if(t){for(let r=0;r<t.length;r++)r===e?(a.push("control"),n.push("control")):(a.push(this.computePValue(t[r].values,t[e].values)),n.push(this.computeLift(t[r].values,t[e].values)));this.setState({control:e,liftValues:n,pValues:a})}}render(){const{data:e,metric:t,groups:a}=this.props,{control:n,liftValues:r,pValues:s}=this.state,l=a.map((e,t)=>o.a.createElement(c.Th,{key:t,column:e},e)),i=a.length;l.push(o.a.createElement(c.Th,{key:i+1,column:"pValue"},"p-value")),l.push(o.a.createElement(c.Th,{key:i+2,column:"liftValue"},"Lift %")),l.push(o.a.createElement(c.Th,{key:i+3,column:"significant"},"Significant"));const u=e.map((e,t)=>{const l=a.map((t,a)=>o.a.createElement(c.Td,{key:a,column:t,data:e.group[a]}));return l.push(o.a.createElement(c.Td,{key:i+1,className:this.getPValueStatus(t),column:"pValue",data:s[t]})),l.push(o.a.createElement(c.Td,{key:i+2,className:this.getLiftStatus(t),column:"liftValue",data:r[t]})),l.push(o.a.createElement(c.Td,{key:i+3,className:this.getSignificance(t).toString(),column:"significant",data:this.getSignificance(t)})),o.a.createElement(c.Tr,{key:t,className:t===n?"control":"",onClick:this.computeTTest.bind(this,t)},l)}),p=a.concat([{column:"pValue",sortFunction:(e,t)=>"control"===e?-1:"control"===t||e>t?1:-1},{column:"liftValue",sortFunction:(e,t)=>"control"===e?-1:"control"===t?1:parseFloat(e)>parseFloat(t)?-1:1},{column:"significant",sortFunction:(e,t)=>"control"===e?-1:"control"===t?1:e>t?-1:1}]);return o.a.createElement("div",null,o.a.createElement("h3",null,t),o.a.createElement(c.Table,{className:"table",id:"table_"+t,sortable:p},o.a.createElement(c.Thead,null,l),u))}}h.propTypes=p,h.defaultProps={alpha:.05,liftValPrec:4,pValPrec:6};var d=h;a(1526);const m={alpha:r.a.number,className:r.a.string,data:r.a.objectOf(u).isRequired,groups:r.a.arrayOf(r.a.string).isRequired,liftValPrec:r.a.number,metrics:r.a.arrayOf(r.a.string).isRequired,pValPrec:r.a.number};class f extends o.a.PureComponent{render(){const{className:e,metrics:t,groups:a,data:n,alpha:r,pValPrec:s,liftValPrec:l}=this.props;return o.a.createElement("div",{className:"superset-legacy-chart-paired-t-test "+e},o.a.createElement("div",{className:"paired-ttest-table scrollbar-container"},o.a.createElement("div",{className:"scrollbar-content"},t.map((e,t)=>o.a.createElement(d,{key:t,metric:e,groups:a,data:n[e],alpha:r,pValPrec:Math.min(s,32),liftValPrec:Math.min(l,32)})))))}}f.propTypes=m,f.defaultProps={alpha:.05,className:"",liftValPrec:4,pValPrec:6};t.default=f}}]);