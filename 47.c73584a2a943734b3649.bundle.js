(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{2218:function(t,e,n){"use strict";n.r(e),n.d(e,"ROTATION",(function(){return u})),n.d(e,"default",(function(){return m}));var o=n(3),a=n.n(o),i=n(0),r=n.n(i),s=n(1090),d=n.n(s),c=n(1431);const h=Object(c.createEncoderFactory)({channelTypes:{color:"Color",fontFamily:"Category",fontSize:"Numeric",fontWeight:"Category",text:"Text"},defaultEncoding:{color:{value:"black"},fontFamily:{value:"Helvetica"},fontSize:{value:20},fontWeight:{value:"bold"},text:{value:""}}});function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const u={flat:()=>0,random:()=>30*Math.floor(6*Math.random()-3),square:()=>90*Math.floor(2*Math.random())};class m extends r.a.PureComponent{constructor(...t){super(...t),l(this,"isMounted",!1),l(this,"state",{words:[]}),l(this,"createEncoder",h.createSelector()),l(this,"setWords",t=>{this.isMounted&&this.setState({words:t})})}componentDidMount(){this.isMounted=!0,this.update()}componentDidUpdate(t){const{data:e,encoding:n,width:o,height:a,rotation:i}=this.props;t.data===e&&t.encoding===n&&t.width===o&&t.height===a&&t.rotation===i||this.update()}componentWillUnmount(){this.isMounted=!1}update(){const{data:t,width:e,height:n,rotation:o,encoding:a}=this.props,i=this.createEncoder(a);i.setDomainFromDataset(t),d()().size([e,n]).words(t).padding(5).rotate(u[o]||u.flat).text(t=>i.channels.text.getValueFromDatum(t)).font(t=>i.channels.fontFamily.encodeDatum(t,"Helvetica")).fontWeight(t=>i.channels.fontWeight.encodeDatum(t,"normal")).fontSize(t=>i.channels.fontSize.encodeDatum(t,0)).on("end",this.setWords).start()}render(){const{width:t,height:e,encoding:n}=this.props,{words:o}=this.state,a=this.createEncoder(n);return a.channels.color.setDomainFromDataset(o),r.a.createElement("svg",{width:t,height:e},r.a.createElement("g",{transform:"translate("+t/2+","+e/2+")"},o.map(t=>r.a.createElement("text",{key:t.text,fontSize:t.size+"px",fontWeight:t.weight,fontFamily:t.font,fill:a.channels.color.encodeDatum(t,""),textAnchor:"middle",transform:"translate("+t.x+", "+t.y+") rotate("+t.rotate+")"},t.text))))}}l(m,"propTypes",{rotation:a.a.any,data:a.a.array.isRequired,height:a.a.number.isRequired,width:a.a.number.isRequired}),l(m,"defaultProps",{encoding:{},rotation:"flat"})}}]);